#!/usr/bin/env bash

# ============================================================================
# Ollama AI Setup Script
# ============================================================================

GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${BLUE}ðŸ¤– Setting up Ollama AI...${NC}\n"

# Check if Ollama is installed
if ! command -v ollama &> /dev/null; then
    echo -e "${YELLOW}âš ï¸  Ollama is not installed. Installing...${NC}"
    curl -fsSL https://ollama.com/install.sh | sh
    
    if [ $? -ne 0 ]; then
        echo "âŒ Failed to install Ollama"
        exit 1
    fi
fi

echo -e "${GREEN}âœ“ Ollama is installed${NC}"

# Start Ollama service
echo -e "\n${BLUE}Starting Ollama service...${NC}"
ollama serve &> /dev/null &
sleep 2

# Pull recommended models
echo -e "\n${BLUE}ðŸ“¦ Downloading AI models...${NC}"
echo "This may take a few minutes depending on your connection."

echo -e "\n${BLUE}Pulling llama3 (general purpose)...${NC}"
ollama pull llama3

echo -e "\n${BLUE}Pulling codellama (code generation)...${NC}"
ollama pull codellama

echo -e "\n${GREEN}âœ¨ Ollama setup complete!${NC}"
echo -e "\nAvailable commands:"
echo -e "  ${BLUE}ai${NC}        - Chat with Llama 3 (general questions)"
echo -e "  ${BLUE}code-ai${NC}   - Chat with CodeLlama (code help)"
echo -e "  ${BLUE}ollama${NC}    - Direct Ollama CLI"
echo -e "\nExample usage:"
echo -e "  ${BLUE}ai \"explain git rebase\"${NC}"
echo -e "  ${BLUE}code-ai \"write a python function to parse JSON\"${NC}"
