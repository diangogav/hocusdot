#!/usr/bin/env zsh

# ============================================================================
# System Update Script
# ============================================================================

# Colors
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m' # No Color

echo "${GREEN}ðŸ”„ Starting System Update...${NC}\n"

# 1. Update Dotfiles
echo "${YELLOW}ðŸ“‚ Updating Dotfiles...${NC}"
cd $DOTFILES_PATH
if git pull; then
    echo "${GREEN}âœ“ Dotfiles updated${NC}"
else
    echo "${RED}âœ— Failed to update dotfiles${NC}"
fi
echo ""

# 2. Update System Packages (Ubuntu/Debian)
if command -v apt &> /dev/null; then
    echo "${YELLOW}ðŸ“¦ Updating System Packages...${NC}"
    sudo apt update && sudo apt upgrade -y
    sudo apt autoremove -y
    echo "${GREEN}âœ“ System packages updated${NC}"
fi
echo ""

# 3. Update Zinit Plugins
if command -v zinit &> /dev/null; then
    echo "${YELLOW}ðŸ”Œ Updating Zsh Plugins...${NC}"
    zinit update --all
    echo "${GREEN}âœ“ Zsh plugins updated${NC}"
fi
echo ""

# 4. Update FNM/Node
if command -v fnm &> /dev/null; then
    echo "${YELLOW}â¬¢ Updating Node.js versions...${NC}"
    # Check for fnm update (if installed via script)
    # fnm install --lts
    echo "${GREEN}âœ“ Node.js checked${NC}"
fi
echo ""

# 5. Update tldr (if installed)
if command -v tldr &> /dev/null; then
    echo "${YELLOW}ðŸ“š Updating tldr pages...${NC}"
    tldr --update
    echo "${GREEN}âœ“ tldr pages updated${NC}"
fi

echo "\n${GREEN}âœ¨ System update complete!${NC}"
